---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE, SITE_TITLE_MOBILE } from '../consts';
import client from '@/utils/umbraco-client'

const pages = await client.getContentByType("content", {
  expand: "all",
  sort: {
    type: 'sortOrder',
    order: 'asc'
  }
});
const blog = await client.getContentByType("blog", {
  expand: "all",
});
---
<header class="c-header">
  <div class="o-container">
    <div class="site-info">
      <a href="/" class="site-info__desktop">{SITE_TITLE}</a>
      <a href="/" class="site-info__mobile">{SITE_TITLE_MOBILE}</a>
    </div>

    <nav class="c-nav">
      {pages.map(page => (
        <HeaderLink href={page.route.path}>{page.name}</HeaderLink>
      ))}
      {blog.map(page => (
        <HeaderLink href={page.route.path}>{page.name}</HeaderLink>
      ))}
      <HeaderLink href="/feed.xml" class="c-nav-item--feed">
        <svg xmlns="http://www.w3.org/2000/svg" id="RSSicon" viewBox="0 0 8 8" width="256" height="256">
          <style type="text/css">
            .button {stroke: none; fill: orange;}
            .symbol {stroke: none; fill: white;}
          </style>
          <rect class="button" width="8" height="8" rx="1.5"/>
          <circle class="symbol" cx="2" cy="6" r="1"/>
          <path class="symbol" d="m 1,4 a 3,3 0 0 1 3,3 h 1 a 4,4 0 0 0 -4,-4 z"/>
          <path class="symbol" d="m 1,2 a 5,5 0 0 1 5,5 h 1 a 6,6 0 0 0 -6,-6 z"/>
        </svg>
      </HeaderLink>
      <a href="#" class="c-mode-toggle js-mode-toggle"><span class="dark">ðŸŒ™</span><span class="light">ðŸ”†</span></a>
    </nav>
  </div>
</header>